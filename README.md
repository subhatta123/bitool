# DBChat - Query Your Data with AI

This application allows you to connect to various data sources (CSV files, PostgreSQL, Oracle, SQL Server), ask questions in plain English, and get answers along with visualizations. The natural language processing is powered by a Large Language Model (LLM).

## Features

- Connect to CSV files.
- UI placeholders for connecting to PostgreSQL, Oracle, and SQL Server databases.
- Ask questions in natural language.
- (Placeholder) Convert natural language to SQL queries using an LLM.
- (Placeholder) Execute SQL queries against the connected data source.
- Display query results in a table.
- Basic bar chart visualization of results.

## Setup

1.  **Clone the repository (or create the files as provided).**

2.  **Create a virtual environment (recommended):**
    ```bash
    python -m venv venv
    ```
    Activate it:
    -   Windows:
        ```bash
        .\venv\Scripts\activate
        ```
    -   macOS/Linux:
        ```bash
        source venv/bin/activate
        ```

3.  **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **LLM API Key:**
    You will need an API key from an LLM provider (e.g., OpenAI, Google AI Studio for Gemini) to enable the natural language to SQL conversion.
    -   Obtain your API key from your chosen provider.
    -   The application will prompt you to enter this key in the sidebar when you run it.
    -   *(Note: The actual LLM integration logic is currently a placeholder in `app.py` and needs to be implemented. You'll also need to uncomment the respective LLM library in `requirements.txt` and install it.)*

## How to Run

1.  Make sure your virtual environment is activated and dependencies are installed.
2.  Navigate to the directory containing `app.py`.
3.  Run the Streamlit application:
    ```bash
    streamlit run app.py
    ```
4.  Open your web browser and go to the local URL provided by Streamlit (usually `http://localhost:8501`).

## Development Roadmap (Next Steps)

-   **Implement LLM Integration:**
    -   Choose an LLM provider (OpenAI, Google Gemini, etc.).
    -   Install the corresponding Python SDK (e.g., `openai`, `google-generativeai`).
    -   Write the function `call_llm_to_generate_sql` in `app.py` to interact with the LLM API. This function should take the natural language query, the LLM API key, and ideally some schema information about the connected data source (to help the LLM generate accurate queries).
-   **Implement Database Connections:**
    -   Uncomment and install the required database connector libraries from `requirements.txt` (e.g., `psycopg2-binary` for PostgreSQL, `oracledb` for Oracle, `pyodbc` for SQL Server).
    -   Implement the actual connection logic in `handle_db_connection` in `app.py` using libraries like SQLAlchemy or the specific database connectors.
    -   Fetch table schemas/metadata after connecting to a database to provide context to the LLM.
-   **SQL Execution on CSV:**
    -   Integrate a library like `pandasql` to allow executing SQL queries (generated by the LLM) directly on the loaded CSV data (Pandas DataFrame).
-   **Advanced Visualizations:**
    -   Allow users to choose different chart types.
    -   Use libraries like Plotly or Matplotlib for more interactive and customizable visualizations.
-   **Error Handling and UX Improvements:**
    -   More robust error handling for connections, query execution, and LLM interactions.
    -   Improved UI feedback and loading states.
-   **Security:**
    -   Be mindful of SQL injection if constructing queries directly, though using an LLM to generate queries and then executing them should ideally be done via ORMs or parameterized queries if possible.
    -   Securely manage API keys (e.g., using environment variables for deployment, though Streamlit's secrets management is good for Streamlit Cloud).

## Project Structure

```
.dbchat/
├── app.py            # Main Streamlit application
├── requirements.txt  # Python dependencies
├── README.md         # This file
└── (venv/)           # Virtual environment directory (optional)
``` 